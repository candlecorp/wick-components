---
name: "regex"
kind: wick/component@v1
metadata:
  description: "A regular expression component for matching and capturing strings."
  authors: ["Candle Corporation"]
  licenses: ["Apache-2.0"]
  documentation: Source code available at https://github.com/candlecorp/wick-components/tree/main/components
  version: "0.0.1"
component:
  kind: wick/component/wasmrs@v1
  ref: build/regex.signed.wasm
  operations:
    - name: rematch
      inputs:
        - name: input
          type: string
        - name: pattern
          type: string
      outputs:
        - name: result
          type: bool
        - name: matches
          type: { list: { type: { list: { type: string } } } }
          optional: true
tests:
  - name: regex
    operation: rematch
    input:
      - name: input
        data: "This is a string.  It is not very long."
      - name: pattern
        data: '(\w+)' # match words
    output:
      - name: result
        data: true
      - name: matches
        data: '[["This"], ["is"], ["a"], ["string"], ["It"], ["is"], ["not"], ["very"], ["long"]]'

    # - name: search
    #   inputs:
    #     - name: result
    #       type: boolean
    #     - name: input
    #       type: string
    #     - name: pattern
    #       type: string
    #   outputs:
    #     - name: output
    #       type: [string]
    # - name: replace
    #   inputs:
    #     - name: input
    #       type: string
    #     - name: pattern
    #       type: string
    #     - name: replacement
    #       type: string
    #   outputs:
    #     - name: result
    #       type: boolean
    #     - name: output
    #       type: string
    # - name: split
    #   inputs:
    #     - name: input
    #       type: string
    #     - name: pattern
    #       type: string
    #   outputs:
    #     - name: result
    #       type: boolean
    #     - name: output
    #       type: [string]
